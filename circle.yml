machine:
  ruby:
    version: 2.2.2

dependencies:
  pre:
    - .circle/install-crenv.bash
    - crenv --version
    - .circle/install-crystal.bash
    - crystal --version

  override:
    - crystal deps
    - bundle install --deployment --path=vendor/bundle

  cache_directories:
    - .crystal
    - .deps
    - ~/.crenv

test:
  override:
    - bundle exec rake
    - bundle exec rake spec

deployment:
  production:
    branch: master
    commands:
      - git push ssh://569ab9917628e1eb9b000110@crystal-pinemz2.rhcloud.com/~/git/crystal.git/ master
